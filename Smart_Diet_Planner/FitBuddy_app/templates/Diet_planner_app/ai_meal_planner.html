{% extends 'FitBuddy_app/base.html' %}

{% block title %}AI Meal Planner - FitBuddy{% endblock %}

{% block content %}
<style>
    .meal-planner-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .planner-header {
        text-align: center;
        margin-bottom: 40px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 60px 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    .planner-header h1 {
        font-size: var(--extra-large-font-size);
        margin-bottom: 15px;
        font-weight: 700;
    }
    
    .planner-header p {
        font-size: var(--medium-font-size);
        opacity: 0.9;
        max-width: 600px;
        margin: 0 auto;
    }
    
    .ai-icon {
        font-size: 3rem;
        margin-bottom: 20px;
        color: #ffd700;
    }
    
    .form-container {
        background: white;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        margin-bottom: 30px;
    }
    
    .form-section {
        margin-bottom: 30px;
    }
    
    .form-section h3 {
        color: #333;
        font-size: var(--large-font-size);
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #f0f0f0;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 8px;
        color: #555;
        font-size: var(--base-font-size);
    }
    
    .form-control {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: var(--base-font-size);
        transition: border-color 0.3s ease;
    }
    
    .form-control:focus {
        border-color: #667eea;
        outline: none;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }
    
    .btn-generate {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        border: none;
        padding: 15px 40px;
        font-size: var(--medium-font-size);
        font-weight: 600;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        max-width: 300px;
        margin: 0 auto;
        display: block;
    }
    
    .btn-generate:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(40, 167, 69, 0.3);
    }
    
    .btn-generate:active {
        transform: translateY(0);
    }
    
    .loading {
        display: none;
        text-align: center;
        padding: 20px;
    }
    
    .loading .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .feature-highlight {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    
    .feature-card {
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        text-align: center;
        transition: transform 0.3s ease;
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
    }
    
    .feature-card i {
        font-size: 2.5rem;
        color: #667eea;
        margin-bottom: 15px;
    }
    
    .feature-card h4 {
        color: #333;
        margin-bottom: 10px;
        font-size: var(--medium-font-size);
    }
    
    .feature-card p {
        color: #666;
        font-size: var(--base-font-size);
        line-height: 1.6;
    }
    
    .tips-section {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 10px;
        margin-top: 30px;
    }
    
    .tips-section h3 {
        color: #333;
        margin-bottom: 20px;
    }
    
    .tips-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 15px;
    }
    
    .tip-item {
        background: white;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #28a745;
        font-size: var(--base-font-size);
    }
    
    @media (max-width: 768px) {
        .meal-planner-container {
            padding: 10px;
        }
        
        .planner-header {
            padding: 40px 15px;
        }
        
        .form-container {
            padding: 20px;
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="meal-planner-container">
    <!-- Header Section -->
    <div class="planner-header">
        <i class="fas fa-robot ai-icon"></i>
        <h1>AI-Powered Meal Planner</h1>
        <p>Generate personalized meal plans tailored to your dietary goals, preferences, and nutritional needs using advanced AI technology.</p>
    </div>
    
    <!-- Feature Highlights -->
    <div class="feature-highlight">
        <div class="feature-card">
            <i class="fas fa-brain"></i>
            <h4>Smart AI Planning</h4>
            <p>Advanced algorithms analyze your preferences to create optimal meal combinations</p>
        </div>
        <div class="feature-card">
            <i class="fas fa-balance-scale"></i>
            <h4>Nutritionally Balanced</h4>
            <p>Every plan meets your caloric and macronutrient requirements for optimal health</p>
        </div>
        <div class="feature-card">
            <i class="fas fa-utensils"></i>
            <h4>Recipe Database</h4>
            <p>Choose from our extensive collection of verified, delicious recipes</p>
        </div>
        <div class="feature-card">
            <i class="fas fa-calendar-alt"></i>
            <h4>Flexible Duration</h4>
            <p>Generate meal plans for any duration from 1 day to 4 weeks</p>
        </div>
    </div>
    
    <!-- Meal Plan Generator Form -->
    <div class="form-container">
        <form method="post" id="mealPlanForm">
            {% csrf_token %}
            
            <!-- Basic Information -->
            <div class="form-section">
                <h3><i class="fas fa-user"></i> Personal Information</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" name="age" class="form-control" min="15" max="100" value="30" required>
                    </div>
                    <div class="form-group">
                        <label for="weight">Weight</label>
                        <input type="text" id="weight" name="weight" class="form-control" placeholder="e.g., 70kg or 154lbs" value="70kg" required>
                    </div>
                    <div class="form-group">
                        <label for="height">Height</label>
                        <input type="text" id="height" name="height" class="form-control" placeholder="e.g., 5'8\" or 173cm" value="5'8\"" required>
                    </div>
                </div>
            </div>
            
            <!-- Goals & Preferences -->
            <div class="form-section">
                <h3><i class="fas fa-target"></i> Goals & Preferences</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="goal">Primary Goal</label>
                        <select id="goal" name="goal" class="form-control" required>
                            <option value="lose weight">Lose Weight</option>
                            <option value="maintain weight" selected>Maintain Weight</option>
                            <option value="gain weight">Gain Weight</option>
                            <option value="build muscle">Build Muscle</option>
                            <option value="improve health">Improve Health</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="activity_level">Activity Level</label>
                        <select id="activity_level" name="activity_level" class="form-control" required>
                            <option value="sedentary">Sedentary (little/no exercise)</option>
                            <option value="light">Light (light exercise 1-3 days/week)</option>
                            <option value="moderate" selected>Moderate (moderate exercise 3-5 days/week)</option>
                            <option value="active">Active (hard exercise 6-7 days/week)</option>
                            <option value="very active">Very Active (very hard exercise, physical job)</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Diet Specifications -->
            <div class="form-section">
                <h3><i class="fas fa-leaf"></i> Diet Specifications</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="diet_type">Diet Type</label>
                        <select id="diet_type" name="diet_type" class="form-control" required>
                            <option value="Any" selected>Any Diet Type</option>
                            <option value="Balanced">Balanced</option>
                            <option value="Ketogenic">Ketogenic (Keto)</option>
                            <option value="Paleo">Paleo</option>
                            <option value="Vegetarian">Vegetarian</option>
                            <option value="Vegan">Vegan</option>
                            <option value="Mediterranean">Mediterranean</option>
                            <option value="Low Carb">Low Carb</option>
                            <option value="High Protein">High Protein</option>
                            <option value="Gluten Free">Gluten Free</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Plan Configuration -->
            <div class="form-section">
                <h3><i class="fas fa-cogs"></i> Plan Configuration</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="days">Plan Duration (Days)</label>
                        <select id="days" name="days" class="form-control" required>
                            <option value="1">1 Day</option>
                            <option value="3">3 Days</option>
                            <option value="7" selected>1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="21">3 Weeks</option>
                            <option value="28">4 Weeks</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="meals_per_day">Meals Per Day</label>
                        <select id="meals_per_day" name="meals_per_day" class="form-control" required>
                            <option value="3">3 Meals</option>
                            <option value="4" selected>3 Meals + 1 Snack</option>
                            <option value="5">3 Meals + 2 Snacks</option>
                            <option value="6">6 Small Meals</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Additional Preferences -->
            <div class="form-section">
                <h3><i class="fas fa-exclamation-triangle"></i> Restrictions & Preferences</h3>
                <div class="form-group">
                    <label for="allergies">Allergies & Food Restrictions</label>
                    <input type="text" id="allergies" name="allergies" class="form-control" placeholder="e.g., nuts, dairy, shellfish, gluten (leave blank if none)" value="none">
                </div>
                <div class="form-group">
                    <label for="preferences">Additional Preferences</label>
                    <textarea id="preferences" name="preferences" class="form-control" rows="3" placeholder="Any specific foods you love/hate, cooking preferences, time constraints, etc.">none</textarea>
                </div>
            </div>
            
            <!-- Generate Button -->
            <button type="submit" class="btn-generate" id="generateBtn">
                <i class="fas fa-magic"></i> Generate My Meal Plan
            </button>
            
            <!-- Loading Animation -->
            <div class="loading" id="loadingDiv">
                <div class="spinner"></div>
                <p>AI is creating your personalized meal plan...<br>This may take a few moments.</p>
            </div>
        </form>
    </div>
    
    <!-- Tips Section -->
    <div class="tips-section">
        <h3><i class="fas fa-lightbulb"></i> Pro Tips for Better Results</h3>
        <div class="tips-list">
            <div class="tip-item">
                <strong>Be Specific:</strong> The more details you provide about your preferences and restrictions, the better your meal plan will be.
            </div>
            <div class="tip-item">
                <strong>Realistic Goals:</strong> Set achievable calorie targets based on your activity level and goals.
            </div>
            <div class="tip-item">
                <strong>Try New Things:</strong> Be open to new recipes - you might discover your new favorite dish!
            </div>
            <div class="tip-item">
                <strong>Stay Hydrated:</strong> Remember to drink plenty of water throughout the day alongside your meal plan.
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('mealPlanForm').addEventListener('submit', function(e) {
    // Show loading animation
    document.getElementById('generateBtn').style.display = 'none';
    document.getElementById('loadingDiv').style.display = 'block';
    
    // Scroll to loading section
    document.getElementById('loadingDiv').scrollIntoView({ behavior: 'smooth' });
});
</script>
{% endblock %}